## 登录问题分析

根据对代码的分析，我发现了以下关键信息：

1. **后端认证流程**：
   - 查找用户：通过用户名查找用户
   - 密码验证：使用bcrypt.compare比较输入密码和数据库中的password_hash
   - 状态检查：如果用户status为0（禁用），则拒绝登录
   - 返回JWT令牌

2. **前端登录逻辑**：
   - 表单提交到/api/auth/login
   - 成功后保存token并跳转到首页
   - 失败时显示通用错误信息

3. **默认用户配置**：
   - 系统初始化时创建默认管理员用户
   - 用户名：admin
   - 密码：123456
   - 状态：1（活跃）

## 可能的问题原因

1. **用户名或密码错误**：用户可能输入了错误的凭据
2. **用户状态被禁用**：数据库中用户status字段可能被设置为0
3. **bcrypt版本不一致**：加密和验证使用的bcrypt版本不同
4. **数据库连接问题**：无法正常查询用户信息
5. **错误处理不明确**：前端显示的错误信息过于通用，无法定位具体问题

## 解决方案

### 1. 检查并确保默认用户存在且状态正常
- 检查数据库中users表的admin用户记录
- 确保password_hash字段有值
- 确保status字段为1

### 2. 增强错误日志和调试信息
- 在后端auth.service.ts中添加更详细的日志
- 前端登录组件显示更具体的错误信息

### 3. 实现密码重置功能（可选）
- 添加一个简单的密码重置接口
- 或者直接在数据库中更新密码

### 4. 检查bcrypt版本一致性
- 确保后端package.json中bcryptjs版本正确
- 验证密码加密和解密逻辑

## 具体实施步骤

1. **修改auth.service.ts**：添加更详细的日志记录
2. **修改Login/index.tsx**：显示更具体的错误信息
3. **检查数据库**：确认admin用户状态和密码
4. **测试登录**：使用默认凭据测试登录
5. **添加密码重置接口**：可选，用于重置管理员密码

## 预期效果

通过以上步骤，我们可以：
- 定位登录失败的具体原因
- 确保默认管理员用户可以正常登录
- 提供更友好的错误提示
- 为后续可能的密码管理提供便利